document.addEventListener('DOMContentLoaded', function() {

    // --- Accordion Logic ---
    const accordionItems = document.querySelectorAll('.accordion-item');

    accordionItems.forEach(item => {
        const question = item.querySelector('.accordion-question');

        question.addEventListener('click', () => {
            // Check if the clicked item is already open
            const isAlreadyOpen = item.classList.contains('open');

            // Optional: Close all other accordions
            // accordionItems.forEach(otherItem => {
            //     otherItem.classList.remove('open');
            // });

            // If it wasn't open, open it. If it was open, the line above already closed it.
            if (!isAlreadyOpen) {
                item.classList.add('open');
            } else {
                // If you want to allow closing an open item by clicking it again
                item.classList.remove('open');
            }
        });
    });

    // --- Dynamic Year for Footer ---
    const yearSpan = document.getElementById('current-year');
    if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
    }

    // --- Formspree Form Handling (Optional but good practice) ---
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
        contactForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const form = e.target;
            const data = new FormData(form);
            const status = document.getElementById('form-status');

            try {
                const response = await fetch(form.action, {
                    method: form.method,
                    body: data,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    status.style.display = 'block';
                    form.style.display = 'none';
                } else {
                    // Handle server errors
                    status.innerHTML = "Oops! There was a problem submitting your form.";
                    status.style.display = 'block';
                }
            } catch (error) {
                // Handle network errors
                status.innerHTML = "Oops! There was a network problem.";
                status.style.display = 'block';
            }
        });
    }
});
